<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>자바스크립트</title>
<style type="text/css">
img{
    height: 80px;
}


</style>
</head>
<body>
<h2>AJAX - 동기 요청</h2>
<button id="btn1"> 버튼 1 </button>
<style>
#resultDiv{
    height: 200px;
    border: 1px solid red;
}

</style>
<div id="resultDiv"></div>
<script>
"use strict"

// 서버가 요청을 처리하는 중에 오류가 발생한다면
// 그 응답 결과에 따라 분리하여 처리해야한다.
btn1.onclick = function(){
    var xhr = new XMLHttpRequest();
    console.log(xhr.readyState);
    
    xhr.onreadystatechange = function(aa,bb){
	    console.log(aa);
	    console.log(bb);

	    if(xhr.readyState < 4) return;
	    if(xhr.status !== 200){
	        alert("서버에서 오류발생");
	        return;
	    }
	    //서버의 응답결과가 정상인지 오류인지 확인하는 방법
	    //status 코드 값을 확인한다.
	    if(xhr.status == 200){
	    console.log(xhr.responseText);
	    resultDiv.innerHTML = xhr.responseText; 
	    } 
	    }
    };
    // 다음과 같이 존재하지 않는 자원을 요청해보자
    // 그럼서버에서 오류가 발생할 것이고 응답 status 코드는 200이 아닐것이다.
    xhr.open('GET','ex01-1.jspx',true);
    
    xhr.send();
    
 
};


</script>

</body>
</html>