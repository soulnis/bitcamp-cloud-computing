<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>자바스크립트</title>
</head>
<body>
<h1>클로저(closure) - 바깥 함수의 로컬변수 복제 2</h1>
<script>
"use strict"


function outer(p1){

    // 함수를 여러개 리턴해보자;
    // 어떻게? 객체에 담아서 리턴하면된다.
    // 객체에 여러개의 함수를 리턴하면 참조하는 변수는 같은 변수를 참조한다 
    // 그러나 다른곳에서 생성된 함수는 같은 변수가아닌 다른 변수를 참조한다.
    // 객체를 생성하듯 각각 생성된 함수마다 다른 변수를 참조한다.
    
    var obj = new Object();
       obj.f1 = function() {p1 +=1};
       obj.f2 = function() {p1 +=10};
       obj.f3 = function() {p1 +=100};
       obj.f4 = function() {console.log(p1)};
       
    return obj;
}

var x = outer(100); // outer()는 함수가 4개들어있는 객체를 리턴한다. 
var y = outer(200); // outer()는 함수가 4개들어있는 객체를 리턴한다.

x.f2();
x.f2();
y.f1();
y.f3();
x.f4();//자기참조하는 클로저를 가져옴 p1 
y.f4();//자기참조하는 클로저를 가져옴 p1
//x , y 가지고 있는 내부함수를 서로 각각 다르다 객체처럼 생생된순가에 가지고있는 로컬변수가 다르듯이
// x가 참조하는 참조변수는 x객체에 함수만 참조 가능하다
// y가 참조하는 참조변수는 y객체에 함수만 참조 가능하다
   
</script>
</body>
</html>