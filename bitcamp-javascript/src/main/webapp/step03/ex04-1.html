<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>자바스크립트</title>
</head>
<body>
<h1>클로저(closure) - 바깥 함수의 로컬변수 복제</h1>
<script>
"use strict"


//본래의경우 함수가 호출후에 로컬변수는 사라지게되는데 내부함수를 통해서 외부함수의 변수를 참조한다면
//내부함수가 별도의 메모리에 외부함수의변수를 복제해 두고 내부함수를 통해서 복제해둔 변수에 사용할수있다.
//객체를 매번생성하듯 변수로 생성하면 객체처럼 각각 다른 참조주소를 가진 함수가된다.
//자바스크립트에서 클로저는 자바의 캡슐화를 비슷무리하게 사용하기도한다.
function f1(p1){
    
    var  sum =0;
    for(var i=1;i<p1;i++){
        sum += i;
    }
    
    
    var x = function(){
       console.log("합계=",sum);    
       // sum 변수 처럼 내부함수에서 바깥 함수의 로컬 변수를 *참조*한다면
       // 내부 함수들은 closure만 사용하는 별도의 메모리에 
       // 참조하는 바깥함수의 변수를 복제해 둔다.
       // 왜? 바깥함수의 호출이 끝나 로컬변수가 사라지더라도 
       // 자신은 영향을 받지 않고 그 변수의 값을 사용(접근)하기위함이다.
    }

    return x;
}

var a = f1(10); // f1()은 내부에서 정의한 함수를 리턴한다.
a();


   
</script>
</body>
</html>