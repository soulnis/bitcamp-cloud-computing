<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>자바스크립트</title>
<style type="text/css">
img{
    height: 80px;
}


</style>
</head>
<body>
<h2>프로그래밍으로 이벤트 발생시키기 - 커스텀 이벤트 발생!!</h2>
<div id="d1">

<span id="txt1">이벤트 발생시키기</span>
<button id="btn1"> 버튼 1 </button><br>
</div>
<script>
"use strict"

/// 커스텀 이벤트?
// 기존에 존재하는 이벤트가 아닌 새 이벤트를 만들 수 있다.
// 이벤트에 특정 값을 첨부하려면 detail 이름으로 값을 설정 해야한다.
txt1.onclick = function(){
    console.log('텍스트 눌렀음');
    //1) 발생시킬 커스텀 이벤트 객체를 준비한다.
    //=> 첫번째 파라미터는 이벤트 이름(임의의)
    //=> 두번째 파라미터는 이벤트에 넘겨줄 데이터를 첨부할 값이다.
    //   필수로 detail이라는 이름으로 값을 첨부해야한다.
    var e = new CustomEvent("okok",{
        detail:{
            name : "홍길동",
            age : 20,
            working : false
        }
    });
    //2) 이벤트가 발생할 대상 객체에 대해 dispatchEvent()를 호출 한다. 영어해석)이벤트를 btn1에게 배달하다,급파하다
    //고급 UI사용시 dispatchEvent를 자주사용함~
    btn1.dispatchEvent(e);
    
};
// 새로만든 이벤트에 대한 프로퍼티명이 존재하지 않기때문에
// 커스텀 이벤트의 리스너를 등록할 때 는onxxx 프로퍼티를 사용할수없다.
// 대신 addEventListener()를 사용해야한다.
// 넘어온 데이터는 event객체 안에 detail 객체에 저장되서 사용할 수 있다.
btn1.addEventListener("okok",function(event){
    console.log("name=",event.detail.name);
    console.log("age=",event.detail.age);
    console.log("working=",event.detail.working);

}); 



</script>

</body>
</html>